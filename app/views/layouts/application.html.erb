<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

    <!-- Mobile viewport optimization h5bp.com/ad -->
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <!-- Internet Explorer use the highest version available -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
    <!--[if IEMobile]>
      <meta http-equiv="cleartype" content="on">
    <![endif]-->

    <title><%= render_page_title %></title>
    <%= opensearch_description_tag application_name, opensearch_catalog_url(:format => 'xml') %>
    <%= favicon_link_tag %>
    <%= javascript_pack_tag 'application' %>
    <%= stylesheet_pack_tag 'application' %>
    <%= stylesheet_link_tag "application", media: "all" %>
    <%= javascript_include_tag :modernizr %>
    <%= javascript_include_tag Ckeditor.cdn_url %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= content_for(:head) %>
    <% if Rails.env.production? %>
      <!-- Matomo -->
      <script type="text/javascript">
        var _paq = _paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        document.addEventListener('turbolinks:load', function(event) {
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
        });
        (function() {
          var u="//lib-analytics.princeton.edu/";
          _paq.push(['setTrackerUrl', u+'piwik.php']);
          _paq.push(['setSiteId', '3']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
      </script>
      <!-- End Matomo Code -->
    <% end %>
  </head>
  <body class="<%= render_body_class %>">
    <a class="skip-main" href="#main-content">Skip to main content</a>
  <noscript><%= render 'shared/header_navbar_noscript' %></noscript>
  <%= render 'shared/header_navbar' %>


  <% if admin_user? %>
    <%= render 'shared/menu--admin' %>
  <% end %>

  <%= render partial: 'shared/ajax_modal' %>

  <div id="main-container" class="<%= container_classes %>">
    <%= render :partial=>'pul-assets/blacklight/flash_msg', layout: 'pul-assets/blacklight/shared/flash_messages' %>

    <%= yield %>
  </div>
  </main>
  <noscript><%= render 'pul-assets/footer' %></noscript>
  <%= render 'shared/footer' %>
  </body>
</html>
